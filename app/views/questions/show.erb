
<!-- Vote Button -->
<!-- =================================== -->

<div class="sub-container">

  <%= erb :'/components/_q-container', locals: {question: question} %>

  <h2>Answers</h2>
    <!-- Shouldn't see this button if not logged  -->
    <button id="question-page-answer-button" type="submit">Answer this question</button>
    <form class="question-page-answer-form" action="/questions/<%= question.id %>/answers" method="post">
      <label for="body-textarea">Reply:</label>
      <textarea id="body-textarea" name="answer[body]"></textarea>
      <input type="submit" value="Respond">
    </form>

  </br></br>

  <a id="question-comment-link" href="/questions/<%= question.id %>/comments/new">Comment on this question</a>

  </br></br>

  <ul class="question-answers">

    <% question.answers.each do |answer| %>
      <li class="answers-list">
        <span id="best-answer-div">
          <li><%= erb :'answers/_show', locals: {question: question, answer: answer} %></li></br>
          <% if answer.best_answer? %><img class="best-answer-image" src="http://clipartix.com/wp-content/uploads/2016/04/Thumbs-up-clipart-2.png" alt="Best" height="30" width="30">
          <% else %>
            <img class="best-answer-image" src="http://clipartix.com/wp-content/uploads/2016/04/Thumbs-up-clipart-2.png" alt="Best" height="30" width="30" style="display: none">
          <% end %>

          <% if question.questioner_id == session[:id] %>
          <form class="best-answer-form" action="/questions/<%= answer.question_id %>/answers/<%= answer.id %>/bestanswer" method="POST">
            <input type="hidden" name="_method" value="PUT">
            <input type="submit" value="Best Answer">
          </form>
        </span>
          <% end %>
      </li>
        <ul id="answer-comment-ul">
          <% answer.comments.each do |comment| %>
            <% if logged_in? %>
              <div>
                <form class="ac-upvote" method="post" action='/questions/<%= answer.question_id %>/answers/<%= answer.id %>/comments/<%= comment.id %>/vote'>
                  <button type="submit" name="submit_param" value="submit_value"></button>
                 </form>
                  <div class="votes"><%= comment.points %></div>
                <form class="ac-downvote" method="post" action='/questions/<%= answer.question_id %>/answers/<%= answer.id %>/comments/<%= comment.id %>/downvote'>
                  <button type="submit" name="submit_param" value="submit_value"></button>
                </form>
              </div>
            <% end %>
            <li><%= comment.body %> - <% if logged_in? then %> <%= "#{(User.find(session[:id])).username}" %><% end %></li>
          <% end %>
        </ul>
      <div>
        <a id="answer-comment-link" href="/questions/<%= question.id %>/answers/<%= answer.id %>/comments/new">Comment on this answer</a>
        <form class="answer-comment-form" action="/questions/<%= question.id %>/answers/<%= answer.id %>/comments" method="POST">
          <textarea rows="3" cols="40" name="body" placeholder="Enter comment..."></textarea>
          <input type="submit">
        </form>
      </div>

      <li class="question-answer"><%= erb :'answers/_show', locals: {question: question, answer: answer} %></li></br>
      <!-- MOVED THE ANSWER COMMENTS IN A PARTIAL LINKED WITHIN THE ANSWER PARTIAL OR ELSE THE 'COMMENT ON THIS ANSWER' PERSISTS WHEN ANSWER IS DELETED -->
    <% end %>


    <%= erb :'/components/_as-container', locals: { answers: question.answers } %>

      <!-- MOVED THE ANSWER COMMENTS IN A PARTIAL LINKED WITHIN THE ANSWER PARTIAL OR ELSE THE 'COMMENT ON THIS ANSWER' PERSISTS WHEN ANSWER IS DELETED -->

  </ul>
</div>
